"use strict";define(["jquery","render","get","text!labelTpl"],function(l,i,c,t){l("body").append(t);return function(n){c(n.api.hotkey).then(function(t){console.log(t);var e=JSON.parse(t);1===e.code&&i("#label-tpl",e.data.ads,".hot-key")}).catch(function(t){console.warn(t)}),l(".search-btn").on("click",function(){var t=l(".ipt").val();t?(l(".keys").hide(),e(t)):alert("输入内容为空")});var a=window.localStorage,o=JSON.parse(a.getItem("history"))||[];function e(e){var t=n.api.search+"?key="+e;o.some(function(t){return t.ad_name===e})||(o.push({ad_name:e}),a.setItem("history",JSON.stringify(o)),i("#label-tpl",o,".history")),c(t).then(function(t){var e=JSON.parse(t);1===e.code&&e.data.length?i("#result-tpl",e.data,".result"):1!==e.code||e.data.length||l(".result").html("<p>没有匹配的数据</p>"),l(".result").show()}).catch(function(t){console.warn(t)})}o.length&&i("#label-tpl",o,".history"),l(".ipt").on("input",function(){l(this).val()||(l(".result").hide(),l(".keys").show())}),l(".keys").on("click","li",function(){var t=l(this).html();l(".ipt").val(t),e(t),l(".result").show(),l(".keys").hide()}),l(".icon-back").on("click",function(){location.href="/"})}});