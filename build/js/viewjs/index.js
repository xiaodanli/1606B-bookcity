"use strict";define(["jquery","swiper","get","render","text!listTB","text!listLR"],function(s,d,f,u,t,n){function p(t){s(".tab-item").eq(t).addClass("active").siblings().removeClass("active"),0==t?s(".line").removeClass("move"):s(".line").addClass("move")}console.log(t),s("body").append(t),s("body").append(n),s(".switch-btn").on("click",function(){s(this).toggleClass("list-style"),s(".shelf-list").toggleClass("list-style")}),s(".not-input").on("click",function(){location.href="/search"});return function(e){var n=new d(".wrap-swiper",{onSlideChangeStart:function(t){p(t.activeIndex)}});f(e.api[0]).then(function(t){var n=JSON.parse(t);console.log(n),1===n.code&&function(t){var n=t.items[0].data.data,e=n.filter(function(t){return 0!=t.size});u("#swiper-tpl",e,".banner"),new d(".banner-swiper");var o=n.filter(function(t){return 0==t.size});u("#classify-tpl",o,".classify-wrap");var a=t.items[1].data.data;u("#t-b-tpl",a,".hot");var i,c=function(t,n){console.log("dataArr",t);var e=[];i=Math.ceil(t.length/n),console.log(i);for(var o=0;o<i;o++)e.push(t.splice(0,n));return e}(t.items[2].data.data,5);u("#recommend-tpl",c[0],".recommend-list");var l=0;s(".change-btn").on("click",function(){l<i-1?l++:l=0,u("#recommend-tpl",c[l],".recommend-list")})}(n.data)}).catch(function(t){console.warn(t)});var o,a=1,i=10;function c(t){var n=e.api[1]+"?pagenum="+t+"&limit="+i;f(n).then(function(t){console.log(t);var n=JSON.parse(t);1===n.code&&(o=n.data.total,u("#l-r-tpl",n.data.target,".loadmore",!0),s(".bookcity").on("scroll",r))}).catch(function(t){console.warn(t)})}c(a);var l=s(".bookcity").height();function r(){var t=s(".content").height()-l;s(this).scrollTop()>t-44&&a<o&&(a++,s(".bookcity").off("scroll"),c(a))}s(".tab-wrap").on("click",".tab-item",function(){var t=s(this).index();n.slideTo(t),p(t)}),s(".icon-person").on("click",function(){var t=window.localStorage.getItem("code")||0;location.href=t?"/my":"/login"})}});