"use strict";define(["jquery","render","get","base64"],function(v,p,k,t){return function(n){var t=v(".artical-model"),e=v(".set-style"),c=v(".fz-change");v(".artical-con").on("click",function(){t.show()}),v(".model-center").on("click",function(){e.hide(),t.hide(),c.removeClass("active")}),c.on("click",function(){e.toggle(),c.toggleClass("active")});var a=window.localStorage,o=1*a.getItem("fz")||14;v(".big-btn").on("click",function(){o<32&&(o+=2,a.setItem("fz",o),v(".artical-con p").css("fontSize",o/37.5+"rem"))}),v(".small-btn").on("click",function(){10<o&&(o-=2,a.setItem("fz",o),v(".artical-con p").css("fontSize",o/37.5+"rem"))});var i="夜间"===(a.getItem("status")||"夜间"),s=a.getItem("bg")||"#f7eee5",l=a.getItem("index")||0,r=v(".day-btn dd"),d=v(".day-btn"),f=v(".artical-con"),u=v(".set-bg li");function m(t){t?(r.html("夜间"),d.removeClass("light"),f.css("backgroundColor",s),a.setItem("status","夜间"),u.eq(l).addClass("active").siblings().removeClass("active")):(r.html("白天"),d.addClass("light"),f.css("backgroundColor","#0f1410"),a.setItem("status","白天"),u.eq(5).addClass("active").siblings().removeClass("active"))}m(i),v(".set-bg").on("click","li",function(){s=v(this).attr("data-bg"),i&&f.css("backgroundColor",s),l=v(this).index(),a.setItem("bg",s),a.setItem("index",l),v(this).addClass("active").siblings().removeClass("active")}),v(".day-btn").on("click",function(){m(i=!i)}),k(n.chapterList).then(function(t){var e=JSON.parse(t);console.log(e),1===e.code&&v(".total").html(e.data.item.toc.length)}).catch(function(t){console.warn(t)});var g=n.fiction_id,h=a.getItem(g)||n.chapter_id;function b(t,e){var c=n.articalUrl+"?fiction_id="+t+"&chapter_id="+e;k(c).then(function(t){console.log(t);var e=JSON.parse(t);if(1===e.code){var c=document.createElement("script");c.src=e.data.jsonp,document.body.appendChild(c),window.duokan_fiction_chapter=function(t){console.log(v.base64().decode(t));var e=JSON.parse(v.base64().decode(t));p("#artical-tpl",e,".artical-con"),v(".artical-con p").css("fontSize",o/37.5+"rem")}}}).catch(function(t){console.warn(t)})}v(".cur").html(h),b(g,h),v(".next-btn").on("click",function(){h<4?(b(g,++h),v(".cur").html(h),a.setItem(g,h)):alert("已经是最后一章")}),v(".prev-btn").on("click",function(){1<h?(b(g,--h),v(".cur").html(h),a.setItem(g,h)):alert("已经是第一章")}),v(".go-chapter").on("click",function(){location.href="/chapter/"+g+"/"+h}),v(".back").on("click",function(){location.href="/detail/"+g})}});